version: '3'
services:
  strapi:
    environment: #environment variables
      # container port that strapi is exposed
      PORT: 1337
      # JWT secure token for Strapi auth, check how to generate this from README.md
      ADMIN_JWT_SECRET: to-be-filled
    ports:
      # local port gets exposed to the container port 
      - '1337:1337'
    volumes:
      - ./app:/srv/app
      - modules:/srv/app/node_modules
      - cache:/srv/app/.cache

  mysql:
    volumes:
      - ./mysql-dump:/docker-entrypoint-initdb.d

volumes:
  modules:
  cache: