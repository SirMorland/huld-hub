version: '3'
services:
  strapi:
    environment: #environment variables
      # container port that strapi is exposed
      PORT: 1337
      # JWT secure token for Strapi auth, check how to generate this from README.md
      ADMIN_JWT_SECRET: to-be-filled
      # Email setup
      SMTP_USERNAME: huldhub@outlook.com
      SMTP_PASSWORD: OutlookHubHuld
      SMTP_HOST: smtp.office365.com
      SMTP_PORT: 587
      EMAIL_FROM: huldhub@outlook.com
      EMAIL_REPLY_TO: huldhub@outlook.com

      #AWS SES
      AWS_REGION: eu-north-1
      AWS_SECRET_ACCESS_KEY: bmNqfp25xxBWxAsv57oVyHTwE8bbkJ2Vnp3ydJ8c
      AWS_ACCESS_KEY_ID: AKIAU4VVH26Y5BS5B2HX

    ports:
      # local port gets exposed to the container port 
      - '1337:1337'
    volumes:
      - ./app:/srv/app
      - modules:/srv/app/node_modules
      - cache:/srv/app/.cache

  mysql:
    volumes:
      - ./mysql-dump:/docker-entrypoint-initdb.d

volumes:
  modules:
  cache: